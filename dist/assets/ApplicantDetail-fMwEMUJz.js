var T=Object.defineProperty,L=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var S=(t,a,s)=>a in t?T(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,y=(t,a)=>{for(var s in a||(a={}))K.call(a,s)&&S(t,s,a[s]);if(C)for(var s of C(a))z.call(a,s)&&S(t,s,a[s]);return t},w=(t,a)=>L(t,I(a));var D=(t,a,s)=>new Promise((o,f)=>{var v=l=>{try{d(s.next(l))}catch(m){f(m)}},n=l=>{try{d(s.throw(l))}catch(m){f(m)}},d=l=>l.done?o(l.value):Promise.resolve(l.value).then(v,n);d((s=s.apply(t,a)).next())});import{u as B,o as G,r as j,j as e,V as c,M as R,P as $,q as H,E as V,at as q,H as x,as as O,au as U}from"./index-CUfIjJ7I.js";import{C as p,b as g,c as u,a as N}from"./card-CvS4Gi7r.js";import{B as A}from"./badge-BJFNpF0k.js";import{A as b}from"./arrow-left-BD-OThRf.js";import{D as X}from"./download-CmTtD5JD.js";import{M as E}from"./message-square-RqFf-XrU.js";import{C as F}from"./clock-VOz3KkYg.js";import{C as M}from"./check-circle-D0enXYpD.js";import{X as J}from"./x-circle-4X0bhJoh.js";const k={applied:"Melamar",screening:"Screening",interview:"Interview",offer:"Penawaran",hired:"Diterima",rejected:"Ditolak"},Q={applied:"bg-blue-100 text-blue-800",screening:"bg-yellow-100 text-yellow-800",interview:"bg-purple-100 text-purple-800",offer:"bg-green-100 text-green-800",hired:"bg-primary-100 text-primary-800",rejected:"bg-red-100 text-red-800"},le=()=>{const t=B(),{applicationId:a}=G(),[s,o]=j.useState(null),[f,v]=j.useState(!0),[n,d]=j.useState(""),[l,m]=j.useState(!1);j.useEffect(()=>{(()=>{if(a)try{const r=q(a);if(!r){x.error("Aplikasi tidak ditemukan"),t("/company/applicants");return}o(r)}catch(r){console.error("Error loading application:",r),x.error("Gagal memuat data aplikasi")}finally{v(!1)}})()},[a,t]);const h=i=>{if(a)try{O(a,i),o(r=>r?w(y({},r),{stage:i}):null),x.success(`Status berhasil diubah ke ${k[i]}`)}catch(r){console.error("Error updating stage:",r),x.error("Gagal mengubah status")}},P=()=>D(void 0,null,function*(){if(!(!a||!n.trim())){m(!0);try{const i={id:Date.now().toString(),content:n.trim(),createdAt:new Date().toISOString(),author:"HR Manager"};U(a,i),o(r=>r?w(y({},r),{reviewerNotes:[...r.reviewerNotes,`[${i.author}] ${i.content}`]}):null),d(""),x.success("Catatan berhasil ditambahkan")}catch(i){console.error("Error adding note:",i),x.error("Gagal menambahkan catatan")}finally{m(!1)}}});return f?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(c,{variant:"outline",onClick:()=>t("/company/applicants"),children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"Kembali"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Detail Pelamar"}),e.jsx("p",{className:"text-gray-600",children:"Memuat data pelamar..."})]})]}),e.jsx("div",{className:"bg-white p-8 rounded-card border border-gray-200",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})})]}):s?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(c,{variant:"outline",onClick:()=>t("/company/applicants"),children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"Kembali"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:s.candidateName}),e.jsx("p",{className:"text-gray-600",children:"Melamar untuk posisi ini"})]})]}),e.jsx(A,{className:Q[s.stage],children:k[s.stage]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(p,{children:[e.jsx(g,{children:e.jsx(u,{children:"Informasi Kandidat"})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(R,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),e.jsx("p",{className:"font-medium",children:s.candidateEmail})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Telepon"}),e.jsx("p",{className:"font-medium",children:s.candidatePhone||"-"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(H,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Lokasi"}),e.jsx("p",{className:"font-medium",children:s.candidateLocation||"-"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(V,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Skor Keseluruhan"}),e.jsxs("p",{className:"font-medium",children:[s.scoreOverall,"/10"]})]})]})]}),s.candidateSkills&&s.candidateSkills.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Skills"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.candidateSkills.map((i,r)=>e.jsx(A,{variant:"secondary",children:i},r))})]})]})]}),e.jsxs(p,{children:[e.jsx(g,{children:e.jsx(u,{children:"Detail Aplikasi"})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Tanggal Melamar"}),e.jsx("p",{className:"font-medium",children:new Date(s.appliedAt).toLocaleDateString("id-ID")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ekspektasi Gaji"}),e.jsx("p",{className:"font-medium",children:s.salaryExpectation?`Rp ${s.salaryExpectation.toLocaleString("id-ID")}`:"Tidak disebutkan"})]})]}),s.coverLetter&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Cover Letter"}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:e.jsx("p",{className:"text-sm",children:s.coverLetter})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"CV/Resume"}),e.jsxs(c,{variant:"outline",size:"sm",children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),"Download CV"]})]})]})]}),e.jsxs(p,{children:[e.jsx(g,{children:e.jsx(u,{children:"Catatan Internal"})}),e.jsxs(N,{className:"space-y-4",children:[s.reviewerNotes&&s.reviewerNotes.length>0?e.jsx("div",{className:"space-y-3",children:s.reviewerNotes.map((i,r)=>e.jsx("div",{className:"p-3 border border-gray-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-700",children:i})},r))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"Belum ada catatan."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("textarea",{value:n,onChange:i=>d(i.target.value),placeholder:"Tambahkan catatan internal...",rows:3,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-accent-blue"}),e.jsxs(c,{onClick:P,size:"sm",disabled:l||!n.trim(),children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),l?"Menambahkan...":"Tambah Catatan"]})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(p,{children:[e.jsx(g,{children:e.jsx(u,{children:"Tindakan"})}),e.jsx(N,{className:"space-y-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Ubah Status"}),s.stage!=="screening"&&s.stage!=="hired"&&s.stage!=="rejected"&&e.jsxs(c,{onClick:()=>h("screening"),variant:"outline",size:"sm",className:"w-full justify-start",children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Pindah ke Screening"]}),s.stage==="screening"&&e.jsxs(c,{onClick:()=>h("interview"),variant:"outline",size:"sm",className:"w-full justify-start",children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Undang Interview"]}),s.stage==="interview"&&e.jsxs(c,{onClick:()=>h("offer"),variant:"outline",size:"sm",className:"w-full justify-start",children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Buat Penawaran"]}),s.stage==="offer"&&e.jsxs(c,{onClick:()=>h("hired"),className:"w-full justify-start",children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Terima Kandidat"]}),s.stage!=="hired"&&s.stage!=="rejected"&&e.jsxs(c,{onClick:()=>h("rejected"),variant:"destructive",size:"sm",className:"w-full justify-start",children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Tolak Kandidat"]})]})})]}),e.jsxs(p,{children:[e.jsx(g,{children:e.jsx(u,{children:"Timeline"})}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx("div",{className:"w-2 h-2 bg-accent-blue rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Melamar"}),e.jsx("p",{className:"text-gray-500 text-xs",children:new Date(s.appliedAt).toLocaleDateString("id-ID")})]})]}),s.stage!=="applied"&&e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Dalam Proses"}),e.jsxs("p",{className:"text-gray-500 text-xs",children:["Status: ",k[s.stage]]})]})]})]})})]})]})]})]}):e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(c,{variant:"outline",onClick:()=>t("/company/applicants"),children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"Kembali"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Detail Pelamar"}),e.jsx("p",{className:"text-gray-600",children:"Pelamar tidak ditemukan"})]})]})})};export{le as default};
