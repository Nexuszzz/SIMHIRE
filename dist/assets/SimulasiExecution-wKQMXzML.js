import{c as W,p as ae,u as re,a as ie,b as ne,r as c,H as x,ab as le,j as e,T as B,m as C,a9 as q,A as oe,E as ce,S as de,F as me,V as b,X as xe,ac as he,y as G}from"./index-DYs6XXPw.js";import{B as f}from"./badge-Ce7eyt4n.js";import{T as M}from"./textarea-YCK3PTsC.js";import{P as ue}from"./progress-BEpQUaSn.js";import{S as pe,a as ge}from"./simulasiData-CdKkakvG.js";import{T as H}from"./target-CQ_vebIm.js";import{C as J}from"./clock-DSLg9eJ6.js";import{C as je}from"./code-BbbLROZj.js";import{U as O}from"./upload-CKg7X4Kf.js";import{C as be}from"./copy-BFenJlNO.js";import"./index-5dkGcvY2.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=W("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=W("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),Le=()=>{const{categoryId:y}=ae(),I=re();ie();const{user:$}=ne(),i=pe.find(s=>s.id===y),d=ge(y||""),[m,A]=c.useState(0),[h,w]=c.useState([]),[l,u]=c.useState(""),[p,F]=c.useState(0),[o,L]=c.useState(!1),[ye,Y]=c.useState(!1),[P,E]=c.useState(Date.now()),[g,k]=c.useState("text"),[N,U]=c.useState([]),[z,Z]=c.useState("javascript"),r=d[m],D=(m+1)/d.length*100;c.useEffect(()=>{if(i){const s=i.duration.match(/(\d+)/),t=s?parseInt(s[1])*60:120;F(t*60)}},[i]),c.useEffect(()=>{if(p>0&&!o){const s=setInterval(()=>{F(t=>t<=1?(ee(),0):t-1)},1e3);return()=>clearInterval(s)}},[p,o]);const _=s=>{const t=Math.floor(s/3600),a=Math.floor(s%3600/60),n=s%60;return t>0?`${t}:${a.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`:`${a}:${n.toString().padStart(2,"0")}`},K=()=>{var t;const s=p/(parseInt(((t=i==null?void 0:i.duration.match(/(\d+)/))==null?void 0:t[1])||"2")*3600)*100;return s>50?"text-green-600":s>25?"text-yellow-600":"text-red-600"},R=(s,t)=>{const a=s.trim().length;let n=0;if(a<50)return Math.min(40,a);n+=Math.min(30,a/500*30);const v={coding:["function","class","const","let","return","async","await"],design:["user","experience","interface","visual","layout","color"],analysis:["data","analysis","insight","trend","metric","report"],writing:["audience","content","message","strategy","engagement"],presentation:["slide","visual","present","audience","key point"],"problem-solving":["solution","approach","strategy","optimize","improve"]}[t.type]||[],T=s.toLowerCase(),se=v.filter(te=>T.includes(te)).length;return n+=se/v.length*40,s.split(`

`).length>1&&(n+=10),t.type==="coding"&&s.includes("```")&&(n+=10),(s.includes("-")||s.includes("*"))&&(n+=10),Math.min(100,Math.round(n))},Q=()=>{if(!l.trim()){x.error("Jawaban tidak boleh kosong");return}const s=Math.floor((Date.now()-P)/1e3),t=R(l,r),a={taskId:r.id,answer:l,timeSpent:s,score:t};w([...h,a]),x.success("Task submitted!",{description:`Score: ${t}/100`,icon:t>=80?"üéâ":t>=60?"üëç":"üìù"}),m<d.length-1?(A(m+1),u(""),E(Date.now())):S()},X=()=>{const s={taskId:r.id,answer:"",timeSpent:0,score:0};w([...h,s]),m<d.length-1?(A(m+1),u(""),E(Date.now()),x.info("Task skipped")):S()},ee=()=>{if(x.warning("Waktu habis!",{description:"Simulasi akan diselesaikan otomatis"}),m<d.length){const s=Math.floor((Date.now()-P)/1e3),t=l?R(l,r):0,a={taskId:r.id,answer:l,timeSpent:s,score:t};w([...h,a])}setTimeout(()=>S(),2e3)},S=()=>{if(!$||!i)return;Y(!0);const s=h.reduce((v,T)=>v+T.score,0),t=Math.round(s/d.length),a=Math.round(s/(d.length*100)*100),n={technical:Math.min(100,t+Math.floor(Math.random()*10)),creativity:Math.min(100,t+Math.floor(Math.random()*10)-5),efficiency:Math.min(100,t+Math.floor(Math.random()*10)-3),communication:Math.min(100,t+Math.floor(Math.random()*10)-2)},j={id:crypto.randomUUID(),userId:$.id,categoryId:i.id,categoryName:i.name,completedAt:new Date().toISOString(),totalScore:s,maxScore:d.length*100,percentage:a,breakdown:n,badge:a>=85?i.badge:void 0,certificate:a>=80?`CERT-${i.id.toUpperCase()}-${Date.now()}`:void 0};le(j),I(`/dashboard/simulasi-kerja/${y}/results`,{state:{result:j,submissions:h}})};return!i||!r?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Loading..."})})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-primary-50/20 to-gray-50",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-white/95 backdrop-blur-lg border-b-2 border-primary-200 shadow-lg",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-3 bg-gradient-to-br ${i.color} rounded-xl shadow-lg`,children:e.jsx(B,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:i.name}),e.jsx(f,{className:"bg-primary-100 text-primary-700",children:"Live Test"})]}),e.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4"}),"Task ",m+1," of ",d.length]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(C.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>L(!o),className:"p-3 bg-gradient-to-br from-gray-100 to-gray-200 hover:from-gray-200 hover:to-gray-300 rounded-xl transition-all shadow-md",title:o?"Resume":"Pause",children:o?e.jsx(q,{className:"w-5 h-5 text-primary-600"}):e.jsx(V,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{className:`flex items-center gap-3 px-5 py-3 rounded-xl border-2 ${p<600?"bg-red-50 border-red-300":p<1800?"bg-yellow-50 border-yellow-300":"bg-green-50 border-green-300"} shadow-lg`,children:[e.jsx(J,{className:`w-6 h-6 ${K()}`}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-0.5",children:"Time Left"}),e.jsx("span",{className:`text-3xl font-mono font-bold ${K()}`,children:_(p)})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ue,{value:D,className:"h-2"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:[Math.round(D),"% Complete"]}),e.jsxs("span",{children:[h.length," / ",d.length," Tasks Submitted"]})]})]})]})}),e.jsx("div",{className:"max-w-5xl mx-auto px-6 py-8",children:e.jsx(oe,{mode:"wait",children:e.jsxs(C.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary-400 via-blue-400 to-purple-400 rounded-2xl opacity-20 blur"}),e.jsxs("div",{className:"relative bg-white rounded-2xl border-2 border-primary-200 p-8 mb-6 shadow-2xl",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(f,{className:`${r.difficulty==="easy"?"bg-green-100 text-green-700":r.difficulty==="medium"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:r.difficulty}),e.jsx(f,{variant:"outline",children:r.type}),e.jsxs(f,{variant:"outline",children:[e.jsx(J,{className:"w-3 h-3 mr-1"}),r.timeLimit," min"]})]}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:r.title}),e.jsx("p",{className:"text-gray-600",children:r.description})]}),e.jsx("div",{className:"flex flex-col items-end",children:e.jsxs("div",{className:"bg-gradient-to-br from-yellow-400 to-orange-500 rounded-2xl p-4 shadow-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 text-white mb-1",children:[e.jsx(ce,{className:"w-4 h-4 fill-white"}),e.jsx("div",{className:"text-xs font-medium",children:"Max Score"})]}),e.jsx("div",{className:"text-4xl font-bold text-white",children:r.maxScore})]})})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6 mb-6",children:[e.jsxs("h3",{className:"font-semibold text-blue-900 mb-3 flex items-center gap-2",children:[e.jsx(de,{className:"w-5 h-5"}),"Instruksi"]}),e.jsx("ul",{className:"space-y-2",children:r.instructions.map((s,t)=>e.jsxs("li",{className:"text-blue-800 flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-600 mt-1",children:"‚Ä¢"}),e.jsx("span",{children:s})]},t))})]}),e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-xl p-6 mb-6",children:[e.jsxs("h3",{className:"font-semibold text-purple-900 mb-3 flex items-center gap-2",children:[e.jsx(H,{className:"w-5 h-5"}),"Kriteria Penilaian"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:r.criteria.map((s,t)=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-16 flex-shrink-0",children:e.jsxs(f,{variant:"outline",className:"text-purple-700",children:[s.weight,"%"]})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-purple-900",children:s.name}),e.jsx("div",{className:"text-sm text-purple-700",children:s.description})]})]},t))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-lg font-semibold text-gray-900",children:"Jawaban Anda:"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[l.length," characters | ",N.length," files"]})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>k("text"),className:`px-4 py-2 font-medium text-sm transition-all ${g==="text"?"text-primary-600 border-b-2 border-primary-600":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx(me,{className:"w-4 h-4 inline mr-2"}),"Text Answer"]}),e.jsxs("button",{onClick:()=>k("code"),className:`px-4 py-2 font-medium text-sm transition-all ${g==="code"?"text-primary-600 border-b-2 border-primary-600":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx(je,{className:"w-4 h-4 inline mr-2"}),"Code Editor"]}),e.jsxs("button",{onClick:()=>k("file"),className:`px-4 py-2 font-medium text-sm transition-all ${g==="file"?"text-primary-600 border-b-2 border-primary-600":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx(O,{className:"w-4 h-4 inline mr-2"}),"File Upload"]})]})}),g==="text"&&e.jsx(M,{value:l,onChange:s=>u(s.target.value),placeholder:"Tulis jawaban Anda di sini... Semakin detail dan terstruktur, semakin baik skor Anda!",className:"min-h-[300px] text-base resize-none font-mono",disabled:o}),g==="code"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Language:"}),e.jsxs("select",{value:z,onChange:s=>Z(s.target.value),className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"javascript",children:"JavaScript"}),e.jsx("option",{value:"typescript",children:"TypeScript"}),e.jsx("option",{value:"python",children:"Python"}),e.jsx("option",{value:"java",children:"Java"}),e.jsx("option",{value:"html",children:"HTML"}),e.jsx("option",{value:"css",children:"CSS"}),e.jsx("option",{value:"sql",children:"SQL"})]}),e.jsxs(b,{size:"sm",variant:"outline",onClick:()=>{navigator.clipboard.writeText(l),x.success("Code copied!")},children:[e.jsx(be,{className:"w-4 h-4 mr-2"}),"Copy"]})]}),e.jsx(M,{value:l,onChange:s=>u(s.target.value),placeholder:`// Write your ${z} code here...
// Example:
function solution() {
  // Your code
}`,className:"min-h-[350px] text-base resize-none font-mono bg-gray-900 text-green-400 border-gray-700",disabled:o})]}),g==="file"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-primary-500 transition-colors",children:[e.jsx("input",{type:"file",multiple:!0,onChange:s=>{const t=Array.from(s.target.files||[]);U(a=>[...a,...t]),u(a=>a+`
[Uploaded: ${t.map(n=>n.name).join(", ")}]`),x.success(`${t.length} file(s) uploaded`)},className:"hidden",id:"file-upload",disabled:o}),e.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer inline-flex flex-col items-center",children:[e.jsx(O,{className:"w-12 h-12 text-gray-400 mb-3"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Click to upload or drag and drop"}),e.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"PDF, ZIP, Images (max 10MB per file)"})]})]}),N.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Uploaded Files (",N.length,"):"]}),N.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fe,{className:"w-5 h-5 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(s.size/1024).toFixed(2)," KB"]})]})]}),e.jsx("button",{onClick:()=>{U(a=>a.filter((n,j)=>j!==t)),x.success("File removed")},className:"text-red-500 hover:text-red-700",children:e.jsx(xe,{className:"w-5 h-5"})})]},t))]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Additional Notes:"}),e.jsx(M,{value:l,onChange:s=>u(s.target.value),placeholder:"Add description or explanation for your files...",className:"min-h-[150px] text-base resize-none",disabled:o})]})]}),e.jsxs("div",{className:"flex items-start gap-2 text-sm text-gray-600 bg-blue-50 p-3 rounded-lg",children:[e.jsx(he,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900 mb-1",children:"Tips untuk Score Maksimal:"}),e.jsxs("ul",{className:"text-xs space-y-1 text-blue-800",children:[e.jsxs("li",{children:["‚Ä¢ Gunakan ",e.jsx("strong",{children:"Text"})," untuk penjelasan detail dengan struktur"]}),e.jsxs("li",{children:["‚Ä¢ Gunakan ",e.jsx("strong",{children:"Code Editor"})," untuk implementasi teknis"]}),e.jsxs("li",{children:["‚Ä¢ Gunakan ",e.jsx("strong",{children:"File Upload"})," untuk design, mockup, atau dokumentasi"]}),e.jsx("li",{children:"‚Ä¢ Kombinasi ketiga mode untuk jawaban terlengkap!"})]})]})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs(b,{variant:"outline",onClick:X,disabled:o,children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Skip Task"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(b,{variant:"outline",onClick:()=>{confirm("Yakin ingin keluar? Progress tidak akan disimpan.")&&I(`/dashboard/simulasi-kerja/${y}`)},children:"Keluar"}),e.jsx(b,{onClick:Q,disabled:!l.trim()||o,className:"bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800",children:m===d.length-1?e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Submit & Finish"]}):e.jsxs(e.Fragment,{children:["Submit & Next",e.jsx(G,{className:"w-4 h-4 ml-2"})]})})]})]})]},m)})}),o&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs(C.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-2xl p-8 max-w-md text-center border-4 border-primary-500",children:[e.jsx(V,{className:"w-16 h-16 text-primary-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Simulasi Dijeda"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Timer dihentikan sementara. Klik tombol di bawah untuk melanjutkan."}),e.jsxs(b,{onClick:()=>L(!1),size:"lg",className:"w-full",children:[e.jsx(q,{className:"w-5 h-5 mr-2"}),"Lanjutkan Simulasi"]})]})})]})};export{Le as default};
