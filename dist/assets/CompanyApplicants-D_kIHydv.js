import{r,ai as g,I as J,j as e,U as P,M as B,q as I,E as M,V as N,L as $,y as U,at as T,H as p,al as q}from"./index-DYs6XXPw.js";import{C as m,a as x}from"./card-Cp_ffh4m.js";import{B as h}from"./badge-Ce7eyt4n.js";import{S as z}from"./search-lJ-Ieh97.js";import{C as O}from"./calendar-38gVVlQ3.js";import{E as Q}from"./external-link-lj9uJ0Gr.js";const W=()=>{const[u,j]=r.useState([]),[b,v]=r.useState([]),[t,k]=r.useState("all"),[c,w]=r.useState("all"),[n,S]=r.useState(""),d=[{key:"all",label:"Semua",color:"bg-gray-100 text-gray-800"},{key:"applied",label:"Melamar",color:"bg-blue-100 text-blue-800"},{key:"screening",label:"Screening",color:"bg-yellow-100 text-yellow-800"},{key:"interview",label:"Interview",color:"bg-purple-100 text-purple-800"},{key:"offer",label:"Penawaran",color:"bg-green-100 text-green-800"},{key:"hired",label:"Diterima",color:"bg-primary-100 text-primary-800"},{key:"rejected",label:"Ditolak",color:"bg-red-100 text-red-800"}];r.useEffect(()=>{C()},[]),r.useEffect(()=>{y()},[t,c,n]);const C=()=>{const a=g(),s=J();v(s),j(a)},y=r.useCallback(()=>{let a=g();if(t!=="all"&&(a=a.filter(s=>s.stage===t)),c!=="all"&&(a=a.filter(s=>s.jobId===c)),n.trim()){const s=n.toLowerCase();a=a.filter(l=>{var o;return l.candidateName.toLowerCase().includes(s)||((o=l.candidateEmail)==null?void 0:o.toLowerCase().includes(s))||l.candidateSkills.some(i=>i.toLowerCase().includes(s))})}j(a)},[t,c,n]),f=(a,s)=>{var l,o;try{T(a,s,`Stage diubah ke ${(l=d.find(i=>i.key===s))==null?void 0:l.label}`),y(),p.success(`Status pelamar berhasil diubah ke ${(o=d.find(i=>i.key===s))==null?void 0:o.label}`)}catch(i){q(i,"handleStageChange"),p.error("Gagal mengubah status pelamar")}},L=a=>{var s;return((s=b.find(l=>l.id===a))==null?void 0:s.title)||"Unknown Job"},E=a=>new Date(a).toLocaleDateString("id-ID",{day:"numeric",month:"short"}),A=a=>{var s;return((s=d.find(l=>l.key===a))==null?void 0:s.color)||"bg-gray-100 text-gray-800"},D=a=>{var s;return((s=d.find(l=>l.key===a))==null?void 0:s.label)||a};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Pipeline Pelamar"}),e.jsx("p",{className:"text-gray-600",children:"Kelola semua pelamar di seluruh lowongan"})]}),e.jsx(m,{children:e.jsx(x,{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Cari nama atau skill...",value:n,onChange:a=>S(a.target.value),className:"w-full pl-9 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-accent-blue"})]}),e.jsx("select",{value:t,onChange:a=>k(a.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-accent-blue",children:d.map(a=>e.jsx("option",{value:a.key,children:a.label},a.key))}),e.jsxs("select",{value:c,onChange:a=>w(a.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-accent-blue",children:[e.jsx("option",{value:"all",children:"Semua Lowongan"}),b.map(a=>e.jsx("option",{value:a.id,children:a.title},a.id))]})]})})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:d.filter(a=>a.key!=="all").map(a=>{const s=g().filter(l=>l.stage===a.key).length;return e.jsx(m,{className:"text-center",children:e.jsxs(x,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s}),e.jsx("div",{className:`text-sm font-medium px-2 py-1 rounded-full inline-block ${a.color}`,children:a.label})]})},a.key)})}),e.jsx("div",{className:"space-y-4",children:u.length===0?e.jsx(m,{children:e.jsxs(x,{className:"p-12 text-center",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ï¿½"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:n||t!=="all"||c!=="all"?"Tidak ada pelamar yang cocok":"Belum ada pelamar"}),e.jsx("p",{className:"text-gray-600",children:n||t!=="all"||c!=="all"?"Coba ubah filter atau kata kunci pencarian":"Pelamar akan muncul setelah ada yang mendaftar ke lowongan Anda"})]})}):u.map(a=>e.jsx(m,{className:"hover:shadow-md transition-shadow",children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(P,{className:"w-6 h-6 text-accent-blue"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:a.candidateName}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:L(a.jobId)}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm text-gray-600",children:[a.candidateEmail&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4"}),e.jsx("span",{children:a.candidateEmail})]}),a.candidateLocation&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-4 h-4"}),e.jsx("span",{children:a.candidateLocation})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"w-4 h-4"}),e.jsxs("span",{children:["Melamar ",E(a.appliedAt)]})]}),a.scoreOverall&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"w-4 h-4"}),e.jsxs("span",{children:["Skor: ",a.scoreOverall,"/10"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-3",children:[a.candidateSkills.slice(0,4).map(s=>e.jsx(h,{variant:"secondary",className:"text-xs",children:s},s)),a.candidateSkills.length>4&&e.jsxs(h,{variant:"secondary",className:"text-xs text-gray-500",children:["+",a.candidateSkills.length-4]})]})]})]})}),e.jsx("div",{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Status"}),e.jsx(h,{className:`${A(a.stage)}`,children:D(a.stage)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Ubah Status"}),e.jsx("select",{value:a.stage,onChange:s=>f(a.id,s.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-accent-blue",children:d.filter(s=>s.key!=="all").map(s=>e.jsx("option",{value:s.key,children:s.label},s.key))})]})]})}),e.jsx("div",{children:e.jsxs("div",{className:"space-y-3",children:[a.reviewerNotes.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Catatan Terbaru"}),e.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:a.reviewerNotes[a.reviewerNotes.length-1]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{variant:"outline",size:"sm",className:"w-full",asChild:!0,children:e.jsxs($,{to:`/company/applicants/${a.id}`,children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"Lihat Detail"]})}),a.stage==="interview"&&e.jsxs(N,{size:"sm",className:"w-full",onClick:()=>f(a.id,"offer"),children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Buat Penawaran"]})]})]})})]})})},a.id))})]})};export{W as default};
