var T=Object.defineProperty,L=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var S=(t,s,a)=>s in t?T(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,y=(t,s)=>{for(var a in s||(s={}))K.call(s,a)&&S(t,a,s[a]);if(C)for(var a of C(s))z.call(s,a)&&S(t,a,s[a]);return t},w=(t,s)=>L(t,I(s));var D=(t,s,a)=>new Promise((o,f)=>{var v=l=>{try{d(a.next(l))}catch(m){f(m)}},n=l=>{try{d(a.throw(l))}catch(m){f(m)}},d=l=>l.done?o(l.value):Promise.resolve(l.value).then(v,n);d((a=a.apply(t,s)).next())});import{u as B,p as G,r as p,j as e,V as c,M as R,P as $,q as H,E as V,au as q,H as x,at as O,av as U}from"./index-DOAyMAht.js";import{C as j,b as g,c as u,a as N}from"./card-BBJ26QwF.js";import{B as A}from"./badge-Dz4g0MWb.js";import{A as b}from"./arrow-left-DVExIJYP.js";import{D as X}from"./download-9bwb8y3l.js";import{M as E}from"./message-square-CzyHvtY_.js";import{C as F}from"./clock-DrviHdVU.js";import{C as M}from"./check-circle-BLnhmkif.js";import{X as J}from"./x-circle-cyfqTDEp.js";const k={applied:"Melamar",screening:"Screening",interview:"Interview",offer:"Penawaran",hired:"Diterima",rejected:"Ditolak"},Q={applied:"bg-blue-100 text-blue-800",screening:"bg-yellow-100 text-yellow-800",interview:"bg-purple-100 text-purple-800",offer:"bg-green-100 text-green-800",hired:"bg-primary-100 text-primary-800",rejected:"bg-red-100 text-red-800"},le=()=>{const t=B(),{applicationId:s}=G(),[a,o]=p.useState(null),[f,v]=p.useState(!0),[n,d]=p.useState(""),[l,m]=p.useState(!1);p.useEffect(()=>{(()=>{if(s)try{const r=q(s);if(!r){x.error("Aplikasi tidak ditemukan"),t("/company/applicants");return}o(r)}catch(r){console.error("Error loading application:",r),x.error("Gagal memuat data aplikasi")}finally{v(!1)}})()},[s,t]);const h=i=>{if(s)try{O(s,i),o(r=>r?w(y({},r),{stage:i}):null),x.success(`Status berhasil diubah ke ${k[i]}`)}catch(r){console.error("Error updating stage:",r),x.error("Gagal mengubah status")}},P=()=>D(void 0,null,function*(){if(!(!s||!n.trim())){m(!0);try{const i={id:Date.now().toString(),content:n.trim(),createdAt:new Date().toISOString(),author:"HR Manager"};U(s,i),o(r=>r?w(y({},r),{reviewerNotes:[...r.reviewerNotes,`[${i.author}] ${i.content}`]}):null),d(""),x.success("Catatan berhasil ditambahkan")}catch(i){console.error("Error adding note:",i),x.error("Gagal menambahkan catatan")}finally{m(!1)}}});return f?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(c,{variant:"outline",onClick:()=>t("/company/applicants"),children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"Kembali"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Detail Pelamar"}),e.jsx("p",{className:"text-gray-600",children:"Memuat data pelamar..."})]})]}),e.jsx("div",{className:"bg-white p-8 rounded-card border border-gray-200",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})})]}):a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(c,{variant:"outline",onClick:()=>t("/company/applicants"),children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"Kembali"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:a.candidateName}),e.jsx("p",{className:"text-gray-600",children:"Melamar untuk posisi ini"})]})]}),e.jsx(A,{className:Q[a.stage],children:k[a.stage]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(j,{children:[e.jsx(g,{children:e.jsx(u,{children:"Informasi Kandidat"})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(R,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),e.jsx("p",{className:"font-medium",children:a.candidateEmail})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Telepon"}),e.jsx("p",{className:"font-medium",children:a.candidatePhone||"-"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(H,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Lokasi"}),e.jsx("p",{className:"font-medium",children:a.candidateLocation||"-"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(V,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Skor Keseluruhan"}),e.jsxs("p",{className:"font-medium",children:[a.scoreOverall,"/10"]})]})]})]}),a.candidateSkills&&a.candidateSkills.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Skills"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.candidateSkills.map((i,r)=>e.jsx(A,{variant:"secondary",children:i},r))})]})]})]}),e.jsxs(j,{children:[e.jsx(g,{children:e.jsx(u,{children:"Detail Aplikasi"})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Tanggal Melamar"}),e.jsx("p",{className:"font-medium",children:new Date(a.appliedAt).toLocaleDateString("id-ID")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ekspektasi Gaji"}),e.jsx("p",{className:"font-medium",children:a.salaryExpectation?`Rp ${a.salaryExpectation.toLocaleString("id-ID")}`:"Tidak disebutkan"})]})]}),a.coverLetter&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Cover Letter"}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:e.jsx("p",{className:"text-sm",children:a.coverLetter})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"CV/Resume"}),e.jsxs(c,{variant:"outline",size:"sm",children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),"Download CV"]})]})]})]}),e.jsxs(j,{children:[e.jsx(g,{children:e.jsx(u,{children:"Catatan Internal"})}),e.jsxs(N,{className:"space-y-4",children:[a.reviewerNotes&&a.reviewerNotes.length>0?e.jsx("div",{className:"space-y-3",children:a.reviewerNotes.map((i,r)=>e.jsx("div",{className:"p-3 border border-gray-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-700",children:i})},r))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"Belum ada catatan."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("textarea",{value:n,onChange:i=>d(i.target.value),placeholder:"Tambahkan catatan internal...",rows:3,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-accent-blue"}),e.jsxs(c,{onClick:P,size:"sm",disabled:l||!n.trim(),children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),l?"Menambahkan...":"Tambah Catatan"]})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(j,{children:[e.jsx(g,{children:e.jsx(u,{children:"Tindakan"})}),e.jsx(N,{className:"space-y-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Ubah Status"}),a.stage!=="screening"&&a.stage!=="hired"&&a.stage!=="rejected"&&e.jsxs(c,{onClick:()=>h("screening"),variant:"outline",size:"sm",className:"w-full justify-start",children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Pindah ke Screening"]}),a.stage==="screening"&&e.jsxs(c,{onClick:()=>h("interview"),variant:"outline",size:"sm",className:"w-full justify-start",children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Undang Interview"]}),a.stage==="interview"&&e.jsxs(c,{onClick:()=>h("offer"),variant:"outline",size:"sm",className:"w-full justify-start",children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Buat Penawaran"]}),a.stage==="offer"&&e.jsxs(c,{onClick:()=>h("hired"),className:"w-full justify-start",children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Terima Kandidat"]}),a.stage!=="hired"&&a.stage!=="rejected"&&e.jsxs(c,{onClick:()=>h("rejected"),variant:"destructive",size:"sm",className:"w-full justify-start",children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Tolak Kandidat"]})]})})]}),e.jsxs(j,{children:[e.jsx(g,{children:e.jsx(u,{children:"Timeline"})}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx("div",{className:"w-2 h-2 bg-accent-blue rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Melamar"}),e.jsx("p",{className:"text-gray-500 text-xs",children:new Date(a.appliedAt).toLocaleDateString("id-ID")})]})]}),a.stage!=="applied"&&e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Dalam Proses"}),e.jsxs("p",{className:"text-gray-500 text-xs",children:["Status: ",k[a.stage]]})]})]})]})})]})]})]})]}):e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(c,{variant:"outline",onClick:()=>t("/company/applicants"),children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"Kembali"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Detail Pelamar"}),e.jsx("p",{className:"text-gray-600",children:"Pelamar tidak ditemukan"})]})]})})};export{le as default};
