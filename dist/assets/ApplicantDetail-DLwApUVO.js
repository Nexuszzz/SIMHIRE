var Y=Object.defineProperty,Q=Object.defineProperties;var Z=Object.getOwnPropertyDescriptors;var z=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var $=(r,t,s)=>t in r?Y(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,S=(r,t)=>{for(var s in t||(t={}))ee.call(t,s)&&$(r,s,t[s]);if(z)for(var s of z(t))se.call(t,s)&&$(r,s,t[s]);return r},C=(r,t)=>Q(r,Z(t));var B=(r,t,s)=>new Promise((f,v)=>{var D=c=>{try{m(s.next(c))}catch(x){v(x)}},o=c=>{try{m(s.throw(c))}catch(x){v(x)}},m=c=>c.done?f(c.value):Promise.resolve(c.value).then(D,o);m((s=s.apply(r,t)).next())});import{c as ae,u as te,p as ie,r as n,j as e,Y as l,M as re,P as le,s as ne,G as J,K as d,au as ce,at as de,av as oe}from"./index-Cc6i9FY3.js";import{C as p,b as u,c as g,a as j}from"./card-CEzJgjTj.js";import{B as R}from"./badge-CUgocmjb.js";import{A}from"./arrow-left-BUBX_3m9.js";import{D as me}from"./download-BkUiAbxe.js";import{M as _}from"./message-square-DpV64dA8.js";import{C as G}from"./calendar-DvWcoNSh.js";import{C as xe}from"./clock-3le7_Tb5.js";import{C as q}from"./check-circle-6_ZrZ1zl.js";import{X as he}from"./x-circle-DjfRNPkk.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=ae("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),ue=[{id:"skills",label:"Keterampilan Teknis",description:"Kemampuan teknis sesuai posisi"},{id:"experience",label:"Pengalaman Relevan",description:"Pengalaman kerja yang sesuai"},{id:"education",label:"Pendidikan",description:"Latar belakang pendidikan"},{id:"communication",label:"Komunikasi",description:"Kemampuan komunikasi tertulis"},{id:"cultural_fit",label:"Cultural Fit",description:"Kesesuaian dengan budaya perusahaan"}],T={applied:"Melamar",screening:"Screening",interview:"Interview",offer:"Penawaran",accepted:"Diterima",rejected:"Ditolak"},ge={applied:"bg-blue-100 text-blue-800",screening:"bg-yellow-100 text-yellow-800",interview:"bg-purple-100 text-purple-800",offer:"bg-green-100 text-green-800",accepted:"bg-primary-100 text-primary-800",rejected:"bg-red-100 text-red-800"},Ie=()=>{const r=te(),{applicationId:t}=ie(),[s,f]=n.useState(null),[v,D]=n.useState(!0),[o,m]=n.useState(""),[c,x]=n.useState(!1),[I,V]=n.useState(!1),[N,P]=n.useState({}),[F,y]=n.useState(!1),[b,L]=n.useState(""),[w,M]=n.useState(""),[K,E]=n.useState("");n.useEffect(()=>{if(t){const a=localStorage.getItem(`applicant_scores_${t}`);a&&P(JSON.parse(a))}},[t]);const H=(a,i)=>{const k=C(S({},N),{[a]:i});P(k),t&&localStorage.setItem(`applicant_scores_${t}`,JSON.stringify(k)),d.success("Skor disimpan")},O=()=>{const a=Object.values(N);if(a.length===0)return 0;const i=a.reduce((k,W)=>k+W,0)/a.length;return Math.round(i*10)/10},U=()=>{if(!b||!w){d.error("Mohon isi tanggal dan waktu interview");return}const a={date:b,time:w,notes:K,scheduledAt:new Date().toISOString()};localStorage.setItem(`interview_${t}`,JSON.stringify(a)),h("interview"),d.success("Interview berhasil dijadwalkan! ðŸ“…",{description:`${b} pukul ${w}`}),y(!1),L(""),M(""),E("")};n.useEffect(()=>{(()=>{if(t)try{const i=ce(t);if(!i){d.error("Aplikasi tidak ditemukan"),r("/company/applicants");return}f(i)}catch(i){console.error("Error loading application:",i),d.error("Gagal memuat data aplikasi")}finally{D(!1)}})()},[t,r]);const h=a=>{if(t)try{de(t,a),f(i=>i?C(S({},i),{stage:a}):null),d.success(`Status berhasil diubah ke ${T[a]}`)}catch(i){console.error("Error updating stage:",i),d.error("Gagal mengubah status")}},X=()=>B(void 0,null,function*(){if(!(!t||!o.trim())){x(!0);try{const a={id:Date.now().toString(),content:o.trim(),createdAt:new Date().toISOString(),author:"HR Manager"};oe(t,a),f(i=>i?C(S({},i),{reviewerNotes:[...i.reviewerNotes,`[${a.author}] ${a.content}`]}):null),m(""),d.success("Catatan berhasil ditambahkan")}catch(a){console.error("Error adding note:",a),d.error("Gagal menambahkan catatan")}finally{x(!1)}}});return v?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(l,{variant:"outline",onClick:()=>r("/company/applicants"),children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),"Kembali"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Detail Pelamar"}),e.jsx("p",{className:"text-gray-600",children:"Memuat data pelamar..."})]})]}),e.jsx("div",{className:"bg-white p-8 rounded-card border border-gray-200",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})})]}):s?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(l,{variant:"outline",onClick:()=>r("/company/applicants"),children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),"Kembali"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:s.candidateName}),e.jsx("p",{className:"text-gray-600",children:"Melamar untuk posisi ini"})]})]}),e.jsx(R,{className:ge[s.stage],children:T[s.stage]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(p,{children:[e.jsx(u,{children:e.jsx(g,{children:"Informasi Kandidat"})}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(re,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),e.jsx("p",{className:"font-medium",children:s.candidateEmail})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(le,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Telepon"}),e.jsx("p",{className:"font-medium",children:s.candidatePhone||"-"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ne,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Lokasi"}),e.jsx("p",{className:"font-medium",children:s.candidateLocation||"-"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(J,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Skor Keseluruhan"}),e.jsxs("p",{className:"font-medium",children:[s.scoreOverall,"/10"]})]})]})]}),s.candidateSkills&&s.candidateSkills.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Skills"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.candidateSkills.map((a,i)=>e.jsx(R,{variant:"secondary",children:a},i))})]})]})]}),e.jsxs(p,{children:[e.jsx(u,{children:e.jsx(g,{children:"Detail Aplikasi"})}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Tanggal Melamar"}),e.jsx("p",{className:"font-medium",children:new Date(s.appliedAt).toLocaleDateString("id-ID")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ekspektasi Gaji"}),e.jsx("p",{className:"font-medium",children:s.salaryExpectation?`Rp ${s.salaryExpectation.toLocaleString("id-ID")}`:"Tidak disebutkan"})]})]}),s.coverLetter&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Cover Letter"}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:e.jsx("p",{className:"text-sm",children:s.coverLetter})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"CV/Resume"}),e.jsxs(l,{variant:"outline",size:"sm",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Download CV"]})]})]})]}),e.jsxs(p,{children:[e.jsx(u,{children:e.jsx(g,{children:"Catatan Internal"})}),e.jsxs(j,{className:"space-y-4",children:[s.reviewerNotes&&s.reviewerNotes.length>0?e.jsx("div",{className:"space-y-3",children:s.reviewerNotes.map((a,i)=>e.jsx("div",{className:"p-3 border border-gray-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-700",children:a})},i))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"Belum ada catatan."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("textarea",{value:o,onChange:a=>m(a.target.value),placeholder:"Tambahkan catatan internal...",rows:3,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-accent-blue"}),e.jsxs(l,{onClick:X,size:"sm",disabled:c||!o.trim(),children:[e.jsx(_,{className:"w-4 h-4 mr-2"}),c?"Menambahkan...":"Tambah Catatan"]})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(p,{children:[e.jsx(u,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(g,{children:"Penilaian Kandidat"}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>V(!I),children:I?"Tutup":"Buka"})]})}),e.jsx(j,{children:I?e.jsxs("div",{className:"space-y-4",children:[ue.map(a=>e.jsxs("div",{className:"border-b border-gray-100 pb-3 last:border-0",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:a.label}),e.jsx("p",{className:"text-xs text-gray-500",children:a.description})]})}),e.jsxs("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(i=>e.jsx("button",{onClick:()=>H(a.id,i),className:"p-0.5 hover:scale-110 transition-transform",children:i<=(N[a.id]||0)?e.jsx(J,{className:"w-5 h-5 fill-yellow-400 text-yellow-400"}):e.jsx(pe,{className:"w-5 h-5 text-gray-300"})},i)),e.jsxs("span",{className:"ml-2 text-sm font-medium text-gray-600",children:[N[a.id]||0,"/5"]})]})]},a.id)),e.jsx("div",{className:"pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Rata-rata Skor:"}),e.jsxs("span",{className:"text-lg font-bold text-primary-600",children:[O(),"/5"]})]})})]}):e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-sm text-gray-500",children:Object.keys(N).length>0?e.jsxs(e.Fragment,{children:["Skor rata-rata: ",e.jsxs("span",{className:"font-bold text-primary-600",children:[O(),"/5"]})]}):"Belum ada penilaian"})})})]}),e.jsxs(p,{children:[e.jsx(u,{children:e.jsx(g,{children:"Tindakan"})}),e.jsxs(j,{className:"space-y-3",children:[e.jsxs(l,{onClick:()=>y(!0),variant:"default",size:"sm",className:"w-full bg-gradient-to-r from-primary-600 to-blue-600 hover:from-primary-700 hover:to-blue-700",children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Jadwalkan Interview"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Ubah Status"}),s.stage!=="screening"&&s.stage!=="accepted"&&s.stage!=="rejected"&&e.jsxs(l,{onClick:()=>h("screening"),variant:"outline",size:"sm",className:"w-full justify-start",children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Pindah ke Screening"]}),s.stage==="screening"&&e.jsxs(l,{onClick:()=>h("interview"),variant:"outline",size:"sm",className:"w-full justify-start",children:[e.jsx(_,{className:"w-4 h-4 mr-2"}),"Undang Interview"]}),s.stage==="interview"&&e.jsxs(l,{onClick:()=>h("offer"),variant:"outline",size:"sm",className:"w-full justify-start",children:[e.jsx(q,{className:"w-4 h-4 mr-2"}),"Buat Penawaran"]}),s.stage==="offer"&&e.jsxs(l,{onClick:()=>h("accepted"),className:"w-full justify-start",children:[e.jsx(q,{className:"w-4 h-4 mr-2"}),"Terima Kandidat"]}),s.stage!=="accepted"&&s.stage!=="rejected"&&e.jsxs(l,{onClick:()=>h("rejected"),variant:"destructive",size:"sm",className:"w-full justify-start",children:[e.jsx(he,{className:"w-4 h-4 mr-2"}),"Tolak Kandidat"]})]})]})]}),e.jsxs(p,{children:[e.jsx(u,{children:e.jsx(g,{children:"Timeline"})}),e.jsx(j,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx("div",{className:"w-2 h-2 bg-accent-blue rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Melamar"}),e.jsx("p",{className:"text-gray-500 text-xs",children:new Date(s.appliedAt).toLocaleDateString("id-ID")})]})]}),s.stage!=="applied"&&e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Dalam Proses"}),e.jsxs("p",{className:"text-gray-500 text-xs",children:["Status: ",T[s.stage]]})]})]})]})})]})]})]}),F&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>y(!1),children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl",onClick:a=>a.stopPropagation(),children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(G,{className:"w-5 h-5 text-primary-600"}),"Jadwalkan Interview"]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Tanggal"}),e.jsx("input",{type:"date",value:b,onChange:a=>L(a.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:outline-none",min:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Waktu"}),e.jsx("input",{type:"time",value:w,onChange:a=>M(a.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Catatan (opsional)"}),e.jsx("textarea",{value:K,onChange:a=>E(a.target.value),placeholder:"Lokasi, platform video call, atau instruksi lainnya...",rows:3,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:outline-none resize-none"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(l,{onClick:()=>y(!1),variant:"outline",className:"flex-1",children:"Batal"}),e.jsx(l,{onClick:U,className:"flex-1 bg-gradient-to-r from-primary-600 to-blue-600 hover:from-primary-700 hover:to-blue-700",children:"Jadwalkan"})]})]})})]}):e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(l,{variant:"outline",onClick:()=>r("/company/applicants"),children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),"Kembali"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Detail Pelamar"}),e.jsx("p",{className:"text-gray-600",children:"Pelamar tidak ditemukan"})]})]})})};export{Ie as default};
