var z=Object.defineProperty,H=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var k=(i,t,r)=>t in i?z(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,A=(i,t)=>{for(var r in t||(t={}))$.call(t,r)&&k(i,r,t[r]);if(C)for(var r of C(t))G.call(t,r)&&k(i,r,t[r]);return i},L=(i,t)=>H(i,J(t));import{c as R,o as V,u as Y,r as c,ap as Z,H as b,Y as Q,j as e,V as v,q as M,U as j,m as T,z as E,M as W,P as X,aq as _}from"./index-CUfIjJ7I.js";import{u as ee}from"./useDebounce-DRezGrKt.js";import{B as ae}from"./badge-BJFNpF0k.js";import{D as se,a as te,b as re,c as le,d as ie}from"./dialog-UANGedIu.js";import{C as y}from"./calendar-B1MTZcZf.js";import{C as ne}from"./clock-VOz3KkYg.js";import{M as ce}from"./message-square-RqFf-XrU.js";import{C as oe}from"./check-circle-D0enXYpD.js";import{S as de}from"./search-8EPHXV4K.js";import{E as me}from"./eye-pXj88PjT.js";import"./index-B6IOm_4K.js";import"./index-Yz1Af3tR.js";import"./index-Dw-Fao3m.js";import"./index-1Y59lOpX.js";import"./x-DMxYmNyy.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=R("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Le=()=>{const{jobId:i}=V(),t=Y(),[r,I]=c.useState(null),[o,N]=c.useState([]),[w,P]=c.useState([]),[u,B]=c.useState(""),g=ee(u,500),[d,O]=c.useState("all"),[h,F]=c.useState("newest"),[l,S]=c.useState(null),[K,p]=c.useState(!1);c.useEffect(()=>{if(!i){t("/company/jobs");return}const a=Z(i);if(!a){b.error("Lowongan tidak ditemukan"),t("/company/jobs");return}I(a);const n=Q().filter(m=>m.jobId===i);N(n)},[i,t]),c.useEffect(()=>{let a=[...o];if(g){const s=g.toLowerCase();a=a.filter(n=>{var m;return n.company.toLowerCase().includes(s)||n.jobTitle.toLowerCase().includes(s)||((m=n.candidateEmail)==null?void 0:m.toLowerCase().includes(s))})}d!=="all"&&(a=a.filter(s=>s.status===d)),a.sort((s,n)=>h==="newest"?new Date(n.appliedAt).getTime()-new Date(s.appliedAt).getTime():h==="oldest"?new Date(s.appliedAt).getTime()-new Date(n.appliedAt).getTime():s.company.localeCompare(n.company)),P(a)},[o,g,d,h]);const U=(a,s)=>{_(a,s)?(N(m=>m.map(f=>f.id===a?L(A({},f),{status:s}):f)),b.success("Status lamaran diperbarui",{description:"Kandidat akan menerima notifikasi perubahan status"})):b.error("Gagal memperbarui status")},x=c.useMemo(()=>({total:o.length,pending:o.filter(a=>a.status==="applied").length,screening:o.filter(a=>a.status==="screening").length,interview:o.filter(a=>a.status==="interview").length,offered:o.filter(a=>a.status==="offer").length,accepted:o.filter(a=>a.status==="accepted").length,rejected:o.filter(a=>a.status==="rejected").length}),[o]),q=a=>{switch(a){case"applied":return"bg-blue-100 text-blue-800 border-blue-200";case"screening":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"interview":return"bg-purple-100 text-purple-800 border-purple-200";case"offer":return"bg-green-100 text-green-800 border-green-200";case"accepted":return"bg-emerald-100 text-emerald-800 border-emerald-200";case"rejected":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},D=a=>{switch(a){case"applied":return"Baru Melamar";case"screening":return"Dalam Seleksi";case"interview":return"Interview";case"offer":return"Ditawarkan";case"accepted":return"Diterima";case"rejected":return"Ditolak";default:return a}};return r?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs(v,{variant:"ghost",onClick:()=>t("/company/jobs"),className:"mb-4",children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Kembali ke Daftar Lowongan"]}),e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:r.title}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(M,{className:"w-4 h-4"}),e.jsx("span",{children:r.location})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(y,{className:"w-4 h-4"}),e.jsxs("span",{children:["Dibuka ",new Date(r.publishedAt||r.createdAt).toLocaleDateString("id-ID")]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(j,{className:"w-4 h-4"}),e.jsxs("span",{children:[x.total," Pelamar"]})]})]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[{label:"Total Pelamar",value:x.total,icon:j,color:"primary"},{label:"Menunggu",value:x.pending,icon:ne,color:"blue"},{label:"Interview",value:x.interview,icon:ce,color:"purple"},{label:"Diterima",value:x.accepted,icon:oe,color:"green"}].map((a,s)=>e.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.1},className:"bg-white p-6 rounded-card border border-gray-200 hover:shadow-card-hover transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:a.label}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:a.value})]}),e.jsx("div",{className:`w-12 h-12 rounded-full bg-${a.color}-100 flex items-center justify-center`,children:e.jsx(a.icon,{className:`w-6 h-6 text-${a.color}-600`})})]})},a.label))}),e.jsx("div",{className:"bg-white p-4 rounded-card border border-gray-200",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(de,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Cari pelamar...",value:u,onChange:a=>B(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none"})]}),e.jsxs("select",{value:d,onChange:a=>O(a.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary-500 outline-none",children:[e.jsx("option",{value:"all",children:"Semua Status"}),e.jsx("option",{value:"applied",children:"Baru Melamar"}),e.jsx("option",{value:"screening",children:"Dalam Seleksi"}),e.jsx("option",{value:"interview",children:"Interview"}),e.jsx("option",{value:"offer",children:"Ditawarkan"}),e.jsx("option",{value:"accepted",children:"Diterima"}),e.jsx("option",{value:"rejected",children:"Ditolak"})]}),e.jsxs("select",{value:h,onChange:a=>F(a.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary-500 outline-none",children:[e.jsx("option",{value:"newest",children:"Terbaru"}),e.jsx("option",{value:"oldest",children:"Terlama"}),e.jsx("option",{value:"name",children:"Nama A-Z"})]})]})}),e.jsx("div",{className:"bg-white rounded-card border border-gray-200 overflow-hidden",children:w.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(j,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:u||d!=="all"?"Tidak ada hasil yang cocok":"Belum ada pelamar"}),e.jsx("p",{className:"text-gray-600",children:u||d!=="all"?"Coba ubah filter pencarian Anda":"Lowongan ini belum menerima lamaran"})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:w.map((a,s)=>e.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:s*.05},className:"p-6 hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>{S(a),p(!0)},children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-primary-500 to-primary-600 flex items-center justify-center text-white font-semibold",children:a.company.charAt(0)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:a.company}),a.candidateEmail&&e.jsx("p",{className:"text-sm text-gray-600",children:a.candidateEmail})]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(y,{className:"w-4 h-4"}),e.jsxs("span",{children:["Melamar ",new Date(a.appliedAt).toLocaleDateString("id-ID")]})]}),a.location&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(M,{className:"w-4 h-4"}),e.jsx("span",{children:a.location})]}),a.simulasiScores&&Object.keys(a.simulasiScores).length>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(E,{className:"w-4 h-4"}),e.jsxs("span",{children:["Skor Simulasi: ",Math.round(Object.values(a.simulasiScores)[0]),"/100"]})]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-3",children:[e.jsx(ae,{className:q(a.status),children:D(a.status)}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(v,{size:"sm",variant:"outline",onClick:n=>{n.stopPropagation(),S(a),p(!0)},children:[e.jsx(me,{className:"w-4 h-4 mr-1"}),"Lihat Detail"]})})]})]})},a.id))})}),e.jsx(se,{open:K,onOpenChange:p,children:e.jsx(te,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:l&&e.jsxs(e.Fragment,{children:[e.jsxs(re,{children:[e.jsx(le,{className:"text-2xl",children:"Detail Lamaran"}),e.jsxs(ie,{children:["Melamar untuk posisi ",l.jobTitle]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Informasi Kandidat"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{children:l.company})]}),l.candidateEmail&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{children:l.candidateEmail})]}),l.candidatePhone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{children:l.candidatePhone})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"w-4 h-4 text-gray-600"}),e.jsxs("span",{children:["Melamar ",new Date(l.appliedAt).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})]})]})]})]}),l.simulasiScores&&Object.keys(l.simulasiScores).length>0&&e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx(E,{className:"w-5 h-5 text-blue-600"}),"Hasil Simulasi Kerja"]}),e.jsx("div",{className:"space-y-2",children:Object.entries(l.simulasiScores).map(([a,s])=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm capitalize",children:a.replace("-"," ")}),e.jsxs("span",{className:"font-semibold text-blue-600",children:[Math.round(s),"/100"]})]},a))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Update Status"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["screening","interview","offer","accepted","rejected"].map(a=>e.jsx(v,{variant:l.status===a?"default":"outline",onClick:()=>{U(l.id,a),p(!1)},className:"justify-start",children:D(a)},a))})]}),l.notes&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Catatan"}),e.jsx("p",{className:"text-gray-600",children:l.notes})]})]})]})})})]}):e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})};export{Le as default};
