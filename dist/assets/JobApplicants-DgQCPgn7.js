var z=Object.defineProperty,H=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var A=(n,t,l)=>t in n?z(n,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[t]=l,M=(n,t)=>{for(var l in t||(t={}))G.call(t,l)&&A(n,l,t[l]);if(C)for(var l of C(t))R.call(t,l)&&A(n,l,t[l]);return n},L=(n,t)=>H(n,J(t));import{c as V,p as Z,u as _,r as c,aq as Q,H as v,_ as W,j as e,V as y,q as T,U as f,m as E,z as I,M as X,P as Y,ar as ee}from"./index-BxwNAFHP.js";import{u as se}from"./useDebounce-CgOSw1qg.js";import{B as ae}from"./badge-BE3t5zmO.js";import{D as te,a as re,b as le,c as ie,d as ne}from"./dialog-BzevViP_.js";import{C as N}from"./calendar-DsdK9RkR.js";import{C as ce}from"./clock-DtAe19W4.js";import{M as oe}from"./message-square-tbNFClup.js";import{C as de}from"./check-circle-CmufPfgo.js";import{S as me}from"./search-DmY9rbSz.js";import{E as xe}from"./eye-D6Hoe0_h.js";import"./index-B0MW2v47.js";import"./index-ango0vR1.js";import"./index-D9derKe2.js";import"./index-spQParlO.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=V("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Me=()=>{const{jobId:n}=Z(),t=_(),[l,P]=c.useState(null),[o,w]=c.useState([]),[S,B]=c.useState([]),[p,K]=c.useState(""),b=se(p,500),[m,O]=c.useState("all"),[g,$]=c.useState("newest"),[i,D]=c.useState(null),[F,j]=c.useState(!1);c.useEffect(()=>{if(!n){t("/company/jobs");return}const s=Q(n);if(!s){v.error("Lowongan tidak ditemukan"),t("/company/jobs");return}P(s);const r=W().filter(d=>d.jobId===n);w(r)},[n,t]),c.useEffect(()=>{let s=[...o];if(b){const a=b.toLowerCase();s=s.filter(r=>{var d;return r.company.toLowerCase().includes(a)||r.jobTitle.toLowerCase().includes(a)||((d=r.candidateEmail)==null?void 0:d.toLowerCase().includes(a))})}m!=="all"&&(s=s.filter(a=>a.status===m)),s.sort((a,r)=>g==="newest"?new Date(r.appliedAt).getTime()-new Date(a.appliedAt).getTime():g==="oldest"?new Date(a.appliedAt).getTime()-new Date(r.appliedAt).getTime():a.company.localeCompare(r.company)),B(s)},[o,b,m,g]);const U=(s,a)=>{const r={applied:'Dikembalikan ke status "Melamar"',screening:"Kandidat dipindahkan ke tahap Screening",interview:"Kandidat diundang untuk Interview! ðŸ“…",offer:"Penawaran kerja dikirim ke kandidat! ðŸŽ‰",accepted:"Kandidat diterima! Selamat! ðŸŽŠ",rejected:"Kandidat ditolak"};ee(s,a,void 0,void 0)?(w(x=>x.map(h=>h.id===s?L(M({},h),{status:a}):h)),v.success(r[a],{description:"Kandidat akan menerima notifikasi otomatis via email",duration:3e3})):v.error("Gagal memperbarui status")},u=c.useMemo(()=>({total:o.length,pending:o.filter(s=>s.status==="applied").length,screening:o.filter(s=>s.status==="screening").length,interview:o.filter(s=>s.status==="interview").length,offered:o.filter(s=>s.status==="offer").length,accepted:o.filter(s=>s.status==="accepted").length,rejected:o.filter(s=>s.status==="rejected").length}),[o]),q=s=>{switch(s){case"applied":return"bg-blue-100 text-blue-800 border-blue-200";case"screening":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"interview":return"bg-purple-100 text-purple-800 border-purple-200";case"offer":return"bg-green-100 text-green-800 border-green-200";case"accepted":return"bg-emerald-100 text-emerald-800 border-emerald-200";case"rejected":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},k=s=>{switch(s){case"applied":return"Baru Melamar";case"screening":return"Dalam Seleksi";case"interview":return"Interview";case"offer":return"Ditawarkan";case"accepted":return"Diterima";case"rejected":return"Ditolak";default:return s}};return l?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs(y,{variant:"ghost",onClick:()=>t("/company/jobs"),className:"mb-4",children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),"Kembali ke Daftar Lowongan"]}),e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:l.title}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 mt-2 text-sm sm:text-base text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(T,{className:"w-4 h-4"}),e.jsx("span",{children:l.location})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(N,{className:"w-4 h-4"}),e.jsxs("span",{children:["Dibuka ",new Date(l.publishedAt||l.createdAt).toLocaleDateString("id-ID")]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(f,{className:"w-4 h-4"}),e.jsxs("span",{children:[u.total," Pelamar"]})]})]})]})})]}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[{label:"Total Pelamar",value:u.total,icon:f,color:"primary"},{label:"Menunggu",value:u.pending,icon:ce,color:"blue"},{label:"Interview",value:u.interview,icon:oe,color:"purple"},{label:"Diterima",value:u.accepted,icon:de,color:"green"}].map((s,a)=>e.jsx(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:a*.1},className:"bg-white p-4 sm:p-6 rounded-card border border-gray-200 hover:shadow-card-hover transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:s.label}),e.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mt-1",children:s.value})]}),e.jsx("div",{className:`w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-${s.color}-100 flex items-center justify-center`,children:e.jsx(s.icon,{className:`w-5 h-5 sm:w-6 sm:h-6 text-${s.color}-600`})})]})},s.label))}),e.jsx("div",{className:"bg-white p-4 rounded-card border border-gray-200",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(me,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Cari pelamar...",value:p,onChange:s=>K(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none"})]}),e.jsxs("select",{value:m,onChange:s=>O(s.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary-500 outline-none",children:[e.jsx("option",{value:"all",children:"Semua Status"}),e.jsx("option",{value:"applied",children:"Baru Melamar"}),e.jsx("option",{value:"screening",children:"Dalam Seleksi"}),e.jsx("option",{value:"interview",children:"Interview"}),e.jsx("option",{value:"offer",children:"Ditawarkan"}),e.jsx("option",{value:"accepted",children:"Diterima"}),e.jsx("option",{value:"rejected",children:"Ditolak"})]}),e.jsxs("select",{value:g,onChange:s=>$(s.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary-500 outline-none",children:[e.jsx("option",{value:"newest",children:"Terbaru"}),e.jsx("option",{value:"oldest",children:"Terlama"}),e.jsx("option",{value:"name",children:"Nama A-Z"})]})]})}),e.jsx("div",{className:"bg-white rounded-card border border-gray-200 overflow-hidden",children:S.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(f,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:p||m!=="all"?"Tidak ada hasil yang cocok":"Belum ada pelamar"}),e.jsx("p",{className:"text-gray-600",children:p||m!=="all"?"Coba ubah filter pencarian Anda":"Lowongan ini belum menerima lamaran"})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:S.map((s,a)=>e.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:a*.05},className:"p-6 hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>{D(s),j(!0)},children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-primary-500 to-primary-600 flex items-center justify-center text-white font-semibold",children:s.company.charAt(0)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:s.company}),s.candidateEmail&&e.jsx("p",{className:"text-sm text-gray-600",children:s.candidateEmail})]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm text-gray-600 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(N,{className:"w-4 h-4"}),e.jsxs("span",{children:["Melamar ",new Date(s.appliedAt).toLocaleDateString("id-ID")]})]}),s.location&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(T,{className:"w-4 h-4"}),e.jsx("span",{children:s.location})]}),s.simulasiScores&&Object.keys(s.simulasiScores).length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-4 h-4 text-yellow-600"}),e.jsxs("div",{className:"flex gap-1",children:[Object.entries(s.simulasiScores).slice(0,3).map(([r,d])=>{const x=d,h=x>=80?"bg-green-100 text-green-800 border-green-300":x>=60?"bg-blue-100 text-blue-800 border-blue-300":"bg-yellow-100 text-yellow-800 border-yellow-300";return e.jsxs("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold border ${h}`,title:`${r}: ${x}/100`,children:[r.substring(0,8),": ",Math.round(x)]},r)}),Object.keys(s.simulasiScores).length>3&&e.jsxs("span",{className:"text-xs text-gray-500",children:["+",Object.keys(s.simulasiScores).length-3," lainnya"]})]})]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-3",children:[e.jsx(ae,{className:q(s.status),children:k(s.status)}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(y,{size:"sm",variant:"outline",onClick:r=>{r.stopPropagation(),D(s),j(!0)},children:[e.jsx(xe,{className:"w-4 h-4 mr-1"}),"Lihat Detail"]})})]})]})},s.id))})}),e.jsx(te,{open:F,onOpenChange:j,children:e.jsx(re,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:i&&e.jsxs(e.Fragment,{children:[e.jsxs(le,{children:[e.jsx(ie,{className:"text-2xl",children:"Detail Lamaran"}),e.jsxs(ne,{children:["Melamar untuk posisi ",i.jobTitle]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Informasi Kandidat"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{children:i.company})]}),i.candidateEmail&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{children:i.candidateEmail})]}),i.candidatePhone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{children:i.candidatePhone})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"w-4 h-4 text-gray-600"}),e.jsxs("span",{children:["Melamar ",new Date(i.appliedAt).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})]})]})]})]}),i.simulasiScores&&Object.keys(i.simulasiScores).length>0&&e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5 text-blue-600"}),"Hasil Simulasi Kerja"]}),e.jsx("div",{className:"space-y-2",children:Object.entries(i.simulasiScores).map(([s,a])=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm capitalize",children:s.replace("-"," ")}),e.jsxs("span",{className:"font-semibold text-blue-600",children:[Math.round(a),"/100"]})]},s))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Update Status"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["screening","interview","offer","accepted","rejected"].map(s=>e.jsx(y,{variant:i.status===s?"default":"outline",onClick:()=>{U(i.id,s),j(!1)},className:"justify-start",children:k(s)},s))})]}),i.notes&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Catatan"}),e.jsx("p",{className:"text-gray-600",children:i.notes})]})]})]})})})]}):e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})};export{Me as default};
