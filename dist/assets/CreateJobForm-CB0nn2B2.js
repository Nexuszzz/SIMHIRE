var H=Object.defineProperty,G=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var F=(n,l,t)=>l in n?H(n,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[l]=t,m=(n,l)=>{for(var t in l||(l={}))O.call(l,t)&&F(n,t,l[t]);if(q)for(var t of q(l))_.call(l,t)&&F(n,t,l[t]);return n},u=(n,l)=>G(n,K(l));var R=(n,l,t)=>new Promise((C,f)=>{var N=o=>{try{c(t.next(o))}catch(y){f(y)}},s=o=>{try{c(t.throw(o))}catch(y){f(y)}},c=o=>o.done?C(o.value):Promise.resolve(o.value).then(N,s);c((t=t.apply(n,l)).next())});import{u as z,r as v,H as w,j as e,V as x,X as D,ao as V}from"./index-DYs6XXPw.js";import{C as g,b as h,c as j,a as b}from"./card-Cp_ffh4m.js";import{B as X}from"./badge-Ce7eyt4n.js";import{A as Y}from"./arrow-left-DcZjLXZY.js";import{C as $}from"./clock-DSLg9eJ6.js";import{P as S}from"./plus-C66A2CsR.js";import{S as Q}from"./save-DYGeIsD5.js";const ne=()=>{const n=z(),[l,t]=v.useState(!1),[C,f]=v.useState(null),N="simhire_job_draft",[s,c]=v.useState({title:"",department:"",employmentType:"full-time",experienceLevel:"mid",locationMode:"hybrid",location:"",salaryMin:"",salaryMax:"",currency:"IDR",description:"",requirements:[""],benefits:[""],skills:[],isUrgent:!1,isFeatured:!1,status:"draft"}),[o,y]=v.useState("");v.useEffect(()=>{const a=localStorage.getItem(N);if(a)try{const r=JSON.parse(a);c(r.data),f(new Date(r.timestamp)),w.info("Draft terakhir dimuat",{description:`Tersimpan ${new Date(r.timestamp).toLocaleString("id-ID")}`})}catch(r){console.error("Failed to load draft:",r)}},[]),v.useEffect(()=>{const a=setInterval(()=>{if(s.title||s.description){const r={data:s,timestamp:new Date().toISOString()};localStorage.setItem(N,JSON.stringify(r)),f(new Date)}},3e4);return()=>clearInterval(a)},[s]);const M=()=>{localStorage.removeItem(N),f(null),w.success("Draft dihapus")},d=(a,r)=>{c(i=>u(m({},i),{[a]:r}))},I=(a,r,i)=>{c(k=>u(m({},k),{[a]:k[a].map((p,J)=>J===r?i:p)}))},L=a=>{c(r=>u(m({},r),{[a]:[...r[a],""]}))},T=(a,r)=>{c(i=>u(m({},i),{[a]:i[a].filter((k,p)=>p!==r)}))},P=()=>{o.trim()&&!s.skills.includes(o.trim())&&(c(a=>u(m({},a),{skills:[...a.skills,o.trim()]})),y(""))},B=a=>{c(r=>u(m({},r),{skills:r.skills.filter(i=>i!==a)}))},E=a=>R(void 0,null,function*(){a.preventDefault(),t(!0);try{if(!s.title.trim()||!s.department.trim()||!s.description.trim()){w.error("Harap lengkapi field yang wajib diisi");return}const r=s.requirements.filter(p=>p.trim()),i=s.benefits.filter(p=>p.trim()),k={title:s.title.trim(),department:s.department.trim(),employmentType:s.employmentType,experienceLevel:s.experienceLevel,locationMode:s.locationMode,location:s.location.trim()||"Remote",salaryMin:s.salaryMin?parseInt(s.salaryMin):void 0,salaryMax:s.salaryMax?parseInt(s.salaryMax):void 0,currency:s.currency,description:s.description.trim(),requirements:r,benefits:i,skills:s.skills,isUrgent:s.isUrgent,isFeatured:s.isFeatured,status:s.status};V(k),M(),w.success("Lowongan berhasil dibuat!"),n("/company/jobs")}catch(r){console.error("Error creating job:",r),w.error("Gagal membuat lowongan")}finally{t(!1)}}),U=()=>{c(a=>u(m({},a),{status:"draft"}))},A=()=>{c(a=>u(m({},a),{status:"open"}))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(x,{variant:"outline",onClick:()=>n("/company/jobs"),children:[e.jsx(Y,{className:"w-4 h-4 mr-2"}),"Kembali"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Buat Lowongan Baru"}),e.jsx("p",{className:"text-gray-600",children:"Buat lowongan kerja untuk menarik kandidat terbaik"})]})]}),C&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-green-100 text-green-800 rounded-lg text-sm",children:[e.jsx($,{className:"w-4 h-4"}),e.jsxs("span",{children:["Tersimpan otomatis ",C.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})]})]}),e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:M,className:"text-red-600 hover:text-red-700",children:"Hapus Draft"})]})]}),e.jsxs("form",{onSubmit:E,className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(g,{children:[e.jsx(h,{children:e.jsx(j,{children:"Informasi Dasar"})}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Judul Lowongan *"}),e.jsx("input",{type:"text",value:s.title,onChange:a=>d("title",a.target.value),placeholder:"contoh: Senior Frontend Developer",className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-accent-blue",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Departemen *"}),e.jsx("input",{type:"text",value:s.department,onChange:a=>d("department",a.target.value),placeholder:"contoh: Engineering, Design, Marketing",className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-accent-blue",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipe Pekerjaan"}),e.jsxs("select",{value:s.employmentType,onChange:a=>d("employmentType",a.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-accent-blue",children:[e.jsx("option",{value:"full-time",children:"Full Time"}),e.jsx("option",{value:"part-time",children:"Part Time"}),e.jsx("option",{value:"contract",children:"Kontrak"}),e.jsx("option",{value:"internship",children:"Magang"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Level Pengalaman"}),e.jsxs("select",{value:s.experienceLevel,onChange:a=>d("experienceLevel",a.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-accent-blue",children:[e.jsx("option",{value:"entry",children:"Entry Level"}),e.jsx("option",{value:"mid",children:"Mid Level"}),e.jsx("option",{value:"senior",children:"Senior Level"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mode Lokasi"}),e.jsxs("select",{value:s.locationMode,onChange:a=>d("locationMode",a.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-accent-blue",children:[e.jsx("option",{value:"remote",children:"Remote"}),e.jsx("option",{value:"hybrid",children:"Hybrid"}),e.jsx("option",{value:"on-site",children:"On-site"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lokasi"}),e.jsx("input",{type:"text",value:s.location,onChange:a=>d("location",a.target.value),placeholder:"contoh: Jakarta, Indonesia",className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-accent-blue"})]})]})]})]}),e.jsxs(g,{children:[e.jsx(h,{children:e.jsx(j,{children:"Gaji"})}),e.jsx(b,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gaji Minimum"}),e.jsx("input",{type:"number",value:s.salaryMin,onChange:a=>d("salaryMin",a.target.value),placeholder:"15000000",className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-accent-blue"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gaji Maksimum"}),e.jsx("input",{type:"number",value:s.salaryMax,onChange:a=>d("salaryMax",a.target.value),placeholder:"25000000",className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-accent-blue"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mata Uang"}),e.jsxs("select",{value:s.currency,onChange:a=>d("currency",a.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-accent-blue",children:[e.jsx("option",{value:"IDR",children:"IDR (Rupiah)"}),e.jsx("option",{value:"USD",children:"USD (Dollar)"})]})]})]})})]}),e.jsxs(g,{children:[e.jsx(h,{children:e.jsx(j,{children:"Deskripsi Pekerjaan"})}),e.jsx(b,{children:e.jsx("textarea",{value:s.description,onChange:a=>d("description",a.target.value),placeholder:"Jelaskan tanggung jawab, tugas, dan ekspektasi untuk posisi ini...",rows:6,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-accent-blue",required:!0})})]}),e.jsxs(g,{children:[e.jsx(h,{children:e.jsx(j,{children:"Persyaratan"})}),e.jsxs(b,{className:"space-y-3",children:[s.requirements.map((a,r)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:a,onChange:i=>I("requirements",r,i.target.value),placeholder:"contoh: Minimal 3 tahun pengalaman...",className:"flex-1 px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-accent-blue"}),e.jsx(x,{type:"button",variant:"outline",size:"sm",onClick:()=>T("requirements",r),disabled:s.requirements.length<=1,children:e.jsx(D,{className:"w-4 h-4"})})]},r)),e.jsxs(x,{type:"button",variant:"outline",onClick:()=>L("requirements"),children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Tambah Persyaratan"]})]})]}),e.jsxs(g,{children:[e.jsx(h,{children:e.jsx(j,{children:"Benefit"})}),e.jsxs(b,{className:"space-y-3",children:[s.benefits.map((a,r)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:a,onChange:i=>I("benefits",r,i.target.value),placeholder:"contoh: Asuransi kesehatan...",className:"flex-1 px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-accent-blue"}),e.jsx(x,{type:"button",variant:"outline",size:"sm",onClick:()=>T("benefits",r),disabled:s.benefits.length<=1,children:e.jsx(D,{className:"w-4 h-4"})})]},r)),e.jsxs(x,{type:"button",variant:"outline",onClick:()=>L("benefits"),children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Tambah Benefit"]})]})]}),e.jsxs(g,{children:[e.jsx(h,{children:e.jsx(j,{children:"Skills yang Dibutuhkan"})}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:o,onChange:a=>y(a.target.value),placeholder:"contoh: React, TypeScript...",className:"flex-1 px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-accent-blue",onKeyPress:a=>a.key==="Enter"&&(a.preventDefault(),P())}),e.jsx(x,{type:"button",onClick:P,children:e.jsx(S,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.skills.map((a,r)=>e.jsxs(X,{variant:"secondary",className:"flex items-center gap-1",children:[a,e.jsx("button",{type:"button",onClick:()=>B(a),className:"hover:text-red-600",children:e.jsx(D,{className:"w-3 h-3"})})]},r))})]})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs(g,{children:[e.jsx(h,{children:e.jsx(j,{children:"Publikasi"})}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.isUrgent,onChange:a=>d("isUrgent",a.target.checked)}),e.jsx("span",{className:"text-sm",children:"Lowongan Urgent"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.isFeatured,onChange:a=>d("isFeatured",a.target.checked)}),e.jsx("span",{className:"text-sm",children:"Featured (Prioritas Tinggi)"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(x,{type:"submit",onClick:U,variant:"outline",className:"w-full",disabled:l,children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"Simpan sebagai Draft"]}),e.jsx(x,{type:"submit",onClick:A,className:"w-full",disabled:l,children:"Publikasikan Sekarang"})]})]})]})})]})]})};export{ne as default};
